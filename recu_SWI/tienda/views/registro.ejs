<%- include("header", {}) %>
<h1><%= title %></h1>


<form id="registroForm" action="/registro" method="POST">
    <input type="text" id="username" name="user" placeholder="Usuario" required>
    <input type="password" id="password" name="pass" placeholder="Contraseña" required>
    <input type="password" id="confirmPassword" name="confirmPass" placeholder="Confirmar contraseña" required>
    <button type="submit">Registrar</button>
  </form>
  
  <p id="errorMessage" style="color: red;"></p>
  
  <script>
    document.getElementById("registroForm").addEventListener("submit", function(event) {
      event.preventDefault(); // Detenemos el envío automático del formulario
      //Cuando el usuario hace clic en el botón "Enviar" o presiona "Enter" en un campo, se activa el evento "submit".
      //El evento es interceptado por la función manejadora.
        //event.preventDefault() evita que el formulario se envíe automáticamente.
      const password = document.getElementById("password").value;
      const confirmPassword = document.getElementById("confirmPassword").value;
      const errorMessage = document.getElementById("errorMessage");
  
      // Validaciones
      if (password.length < 8) {
        errorMessage.textContent = "La contraseña debe tener al menos 8 caracteres.";
        return;
      }
  
      if (password !== confirmPassword) {
        errorMessage.textContent = "Las contraseñas no coinciden.";
        return;
      }
  
      // Si las validaciones pasan, enviamos el formulario
      errorMessage.textContent = ""; // Limpiar mensajes de error
      document.getElementById("registroForm").submit();
    });
  </script>
  






<%- include("footer", {}) %>
